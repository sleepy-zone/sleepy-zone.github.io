<!doctype html>
<html lang="zh-Hans" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">2 ç¯‡åšæ–‡ å«æœ‰æ ‡ç­¾ã€ŒClineã€ | ğŸ˜´ Sleepy Zone</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://sleepy-zone.github.io/blog/tags/cline"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" property="og:title" content="2 ç¯‡åšæ–‡ å«æœ‰æ ‡ç­¾ã€ŒClineã€ | ğŸ˜´ Sleepy Zone"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/img/logo.svg"><link data-rh="true" rel="canonical" href="https://sleepy-zone.github.io/blog/tags/cline"><link data-rh="true" rel="alternate" href="https://sleepy-zone.github.io/blog/tags/cline" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://sleepy-zone.github.io/blog/tags/cline" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="ğŸ˜´ Sleepy Zone RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="ğŸ˜´ Sleepy Zone Atom Feed">





<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&amp;display=swap">
<script>!function(t,e,n,a,c,r,s){t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(r=e.createElement(a)).async=1,r.src="https://www.clarity.ms/tag/r1wmvdsf4a",(s=e.getElementsByTagName(a)[0]).parentNode.insertBefore(r,s)}(window,document,"clarity","script")</script><link rel="stylesheet" href="/assets/css/styles.5d8c36ea.css">
<script src="/assets/js/runtime~main.78b442b1.js" defer="defer"></script>
<script src="/assets/js/main.eb065eae.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="è·³åˆ°ä¸»è¦å†…å®¹"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">è·³åˆ°ä¸»è¦å†…å®¹</a></div><nav aria-label="ä¸»å¯¼èˆª" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="åˆ‡æ¢å¯¼èˆªæ " aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Sleepy Zone Site Logo" class="themedComponent__dKv themedComponent--light_rzkv"><img src="/img/logo.svg" alt="Sleepy Zone Site Logo" class="themedComponent__dKv themedComponent--dark_mMAk"></div><b class="navbar__title text--truncate">Sleepy Zone</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">ğŸ”¥åšå®¢</a><a class="navbar__item navbar__link" href="/thoughts">ğŸ’¡æƒ³æ³•</a><a class="navbar__item navbar__link" href="/weekly/2025-04-23">ğŸ“šä¸å‘¨åˆŠ</a></div><div class="navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="æœ€è¿‘åšæ–‡å¯¼èˆª"><div class="sidebarItemTitle_pO2u margin-bottom--md">All posts</div><div role="group"><h3 class="yearGroupHeading_rMGB">2025</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2025-06-07-cline-source-code-1.md">Cline æºç æµ…æ - ä»è¾“å…¥åˆ°è¾“å‡º</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2025-05-30-cline-rule.md">ç°åœ¨å¼€å§‹ä½¿ç”¨ Cline Rules</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2025-04-30-ts-agent-mastra.md">Mastra  - TypeScript AI Agent æ¡†æ¶</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2025-04-30-deepwiki.md">DeepWiki - é˜…è¯»å¼€æºä»£ç çš„ç¥å™¨</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2025-04-24-google-promtps-2.md">è°·æ­Œæç¤ºè¯å·¥ç¨‹ - æœ€ä½³å®è·µ</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2025-04-23-google-promtps.md">è°·æ­Œæç¤ºè¯å·¥ç¨‹ - æ¨¡å‹åŸç†å’Œæç¤ºè¯æŠ€æœ¯</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2025-04-21-old-fe-1.md">ç›˜ç‚¹å‰ç«¯è¿˜åœ¨æ›´æ–°çš„è€é¡¹ç›®</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2025-04-14-github-no-vistit.md">ä» Github ä¸èƒ½è®¿é—®æƒ³åˆ°çš„</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2025-04-10-what-is-agent.md">ä»€ä¹ˆæ˜¯ Agent</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2025-04-07-deepsite.md">DeepSiteï¼šåŸºäº DeepSeek çš„ç”Ÿç åº”ç”¨</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2025-04-06-recent-ai-1.md">æœ€è¿‘å‡ ä»¶å…³äº AI çš„äº‹æƒ…</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2025-03-28-mcp.md">MCP - AI å’ŒçœŸå®ä¸–ç•Œçš„æ¡¥æ¢</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2025-03-26-dev-mcp-server.md">åŠ¨æ‰‹å¼€å‘ä¸€ä¸ª MCP Server</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2025-03-21-woocs">woocsï¼ŒåŸºäº doocs/md çš„å¾®ä¿¡ Markdown ç¼–è¾‘å™¨æ¡Œé¢åº”ç”¨</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2025-03-20-vibe-coding">èŠèŠ vibe coding</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2025-03-19-doocs-md">ã€å¼€æºæ¨èã€‘é«˜åº¦ç®€æ´çš„å¾®ä¿¡ Markdown ç¼–è¾‘å™¨</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2025-03-17-ai-fomo">AI æµªæ½®ä¸‹çš„ FOMO æƒ…ç»ª</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2025-03-10-D2">D2 ç»ˆç«¯æŠ€æœ¯å¤§ä¼šä¹‹æ—…</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2025-02-25-2025-ai-first">2025 å¹´æˆ–è®¸æ˜¯ä¸­å›½çš„ AI å…ƒå¹´</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2025-02-19-we-are-destroying-software">ã€å¥½æ–‡æ¨èã€‘æˆ‘ä»¬æ­£åœ¨æ‘§æ¯è½¯ä»¶</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/ai-replace-fe">AI å¯ä»¥å–ä»£å‰ç«¯å—</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/my-2024">è¿Ÿæ¥çš„ 2024 æ€»ç»“</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2024</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/antd-meetup">Ant Design Meetup ä¹‹è¡Œ</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/sketch-plugin-upload">Sketch æ’ä»¶å®ç°å›¾å±‚å¯¼å‡ºå›¾ç‰‡å¹¶ä¸Šä¼ </a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/ui-diff-in-out">å›½å†…å¤–ç»„ä»¶åº“çš„ä¸€äº›å·®å¼‚</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/thinking-recently">å¯¹è¿‘æœŸä¸€äº›äº‹æƒ…çš„çœ‹æ³•</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/shijing">æˆ‘è¯»äº†è¯»è¯—ç»</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/gradient-in-fe">èŠèŠå‰ç«¯é‡Œçš„æ¸å˜</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/fabritor-2024-1">fabritor @ 2024 çš„ä¸€äº›æ›´æ–°</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-summary">2023 æ€»ç»“</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/welcome">Welcome</a></li></ul></div></nav></aside><main class="col col--7"><header class="margin-bottom--xl"><h1>2 ç¯‡åšæ–‡ å«æœ‰æ ‡ç­¾ã€ŒClineã€</h1><a href="/blog/tags">æŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾</a></header><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/2025-06-07-cline-source-code-1.md">Cline æºç æµ…æ - ä»è¾“å…¥åˆ°è¾“å‡º</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2025-06-07T00:00:00.000Z">2025å¹´6æœˆ7æ—¥</time> Â· <!-- -->é˜…è¯»éœ€ 14 åˆ†é’Ÿ</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/sleepy-zone" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="https://avatars.githubusercontent.com/u/131369648?v=4" alt="SleepyZone"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://github.com/sleepy-zone" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp">SleepyZone</span></a></div><small class="authorTitle_nd0D" title="å‰ç«¯å¼€å‘ / å¼€æºçˆ±å¥½è€…">å‰ç«¯å¼€å‘ / å¼€æºçˆ±å¥½è€…</small><div class="authorSocials_rSDt"></div></div></div></div></div></header><div class="markdown"><p><img decoding="async" loading="lazy" src="https://fastly.jsdelivr.net/gh/bucketio/img17@main/2025/06/06/1749176746221-f97aba25-6da5-461a-be21-369de1c44fff.png" alt="" class="img_ev3q"></p>
<p>æˆ‘ä»¬åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ï¼š<a href="https://mp.weixin.qq.com/s/EkGEk3UrZvxIH2VV0DWdLA" target="_blank" rel="noopener noreferrer">ç°åœ¨å¼€å§‹ä½¿ç”¨ Cline Rules</a> é‡Œç®€å•ä»‹ç»è¿‡ Clineï¼Œæœ¬ç¯‡æ–‡ç« ä»æºç è§’åº¦æ¥çœ‹ä¸€ä¸‹ä»æˆ‘ä»¬è¾“å…¥æŒ‡ä»¤åˆ° Cline è¾“å‡ºçš„è¿‡ç¨‹åˆ°åº•æ˜¯æ€æ ·çš„ï¼Œè¿™æ ·å¯¹æˆ‘ä»¬åç»­ä½¿ç”¨ Cline ä¼šæœ‰æ›´å¥½çš„å¸®åŠ©ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¯åŠ¨-cline">å¯åŠ¨ Cline<a href="#å¯åŠ¨-cline" class="hash-link" aria-label="å¯åŠ¨ Clineçš„ç›´æ¥é“¾æ¥" title="å¯åŠ¨ Clineçš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>è®¿é—® Cline çš„ Github ä»“åº“ READMEï¼š<a href="https://github.com/cline/cline?tab=readme-ov-file#contributing%EF%BC%9A" target="_blank" rel="noopener noreferrer">https://github.com/cline/cline?tab=readme-ov-file#contributingï¼š</a></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/cline/cline.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">code cline</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm run install:all</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>åœ¨ VSCode é‡Œ <code>F5</code> æˆ–è€… <code>Run-&gt;Start Debugging</code> å¼€å§‹è°ƒè¯• Cline VSCode æ’ä»¶ã€‚æ­¤æ—¶ä¼šæ–°å¼€ä¸€ä¸ª VSCode çª—å£ï¼Œè¿™ä¸ªçª—å£é‡Œæˆ‘ä»¬å¯ä»¥æ„‰å¿«çš„è°ƒè¯• VSCodeã€‚</p>
<blockquote>
<p>è¿™é‡Œå¯èƒ½é‡åˆ°ä¸€äº›é—®é¢˜ï¼Œä¸€ä¸ªæ˜¯ä»“åº“é‡Œæåˆ°çš„ï¼Œå¦‚æœæ„å»ºæœ‰é—®é¢˜ï¼Œéœ€è¦å®‰è£… <a href="https://marketplace.visualstudio.com/items?itemName=connor4312.esbuild-problem-matchers" target="_blank" rel="noopener noreferrer">esbuild Problem Matchersæ’ä»¶</a>ï¼›å¦å¤–é¡¹ç›®çš„ Webview é‡Œéœ€è¦å®‰è£… electron è¿™ä¸ªå·¨æ— éœ¸ï¼Œå¯èƒ½ä¼šå¾ˆæ…¢ï¼Œå¯ä»¥è®¾ç½®ä¸ºå›½å†…æºï¼š</p>
</blockquote>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">electron_mirror=https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//npmmirror.com/mirrors/electron/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">electron_builder_binaries_mirror=https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//npmmirror.com/mirrors/electron</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">builder</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">binaries/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">shamefully</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">hoist=true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-by-step-debug">Step by Step Debug<a href="#step-by-step-debug" class="hash-link" aria-label="Step by Step Debugçš„ç›´æ¥é“¾æ¥" title="Step by Step Debugçš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>VSCode å¯¹è‡ªå®¶æ’ä»¶çš„è°ƒè¯•åšçš„éå¸¸å¥½ï¼Œä¸ç®¡æ˜¯ VSCode ä¸»è¿›ç¨‹è¿˜æ˜¯ Webview å†…å®¹ï¼Œä¸‹é¢å°±ä¸€æ­¥ä¸€æ­¥çš„å¼€å§‹è°ƒè¯•ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="å‰ç«¯è¾“å…¥">å‰ç«¯è¾“å…¥<a href="#å‰ç«¯è¾“å…¥" class="hash-link" aria-label="å‰ç«¯è¾“å…¥çš„ç›´æ¥é“¾æ¥" title="å‰ç«¯è¾“å…¥çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>æˆ‘ä»¬å‡†å¤‡ä¸€æ®µç®€å•çš„è¾“å…¥ï¼šåˆ›å»ºä¸€ä¸ªæ–°ä»»åŠ¡ï¼Œå®ç°å¿«é€Ÿæ’åºç®—æ³•ï¼Œå¹¶æ’å…¥åˆ° utils æ–‡ä»¶å†…ã€‚</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/newtask å®ç°å¿«é€Ÿæ’åºç®—æ³•ï¼Œå†™å…¥ @/src/utils/index.ts æ–‡ä»¶</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>è¿™é‡Œä½¿ç”¨äº† Cline çš„å†…ç½®çš„ä¸¤ä¸ªåŠŸèƒ½ï¼šå†…ç½®å‘½ä»¤ Command /newtask ä»¥åŠ mention @ åŠŸèƒ½æŒ‡å®šäº†å†™å…¥çš„æ–‡ä»¶ã€‚Command å¯ä»¥ç†è§£ä¸ºæŒ‡å®šç‰¹å®šä»»åŠ¡çš„ promptsï¼Œæ–¹ä¾¿æ‰§è¡Œä¸€äº›é«˜é¢‘æ“ä½œçš„ä»»åŠ¡ï¼ŒCline å†…ç½®äº†è¯¸å¦‚æ–°å»ºä»»åŠ¡ã€åˆ›å»º Ruleã€åˆ›å»º Github Issue ç­‰ Commandã€‚@ åŠŸèƒ½å¯ä»¥æŒ‡å®šæ¨¡å‹ç‰¹åˆ«å…³æ³¨çš„ä¸Šä¸‹æ–‡ï¼Œæ¯”å¦‚æŒ‡å®šçš„æ–‡ä»¶å†…å®¹ï¼ŒæŒ‡å®šçš„ç›®å½•å†…å®¹ã€‚</p>
</blockquote>
<p>è¾“å…¥æ¡†å†…è¾“å…¥ä¸Šè¿°å†…å®¹ï¼Œç‚¹å‡»å‘é€ï¼Œä»£ç æ–‡ä»¶ï¼š<code>webview-ui/src/components/chat/ChatView.tsx</code>ï¼Œå‘é€æ¶ˆæ¯çš„æ–¹æ³•ä¸º <code>handleSendMessage</code>ï¼ŒWebview å†…åªè´Ÿè´£æ”¶é›†è¾“å…¥ä¿¡æ¯ï¼Œå®é™…ä»»åŠ¡å¤„ç†çš„é€»è¾‘éƒ½ä¼šå‘é€è‡³ VSCode çš„ä¸»è¿›ç¨‹å†…ï¼ŒVSCode ä¸»è¿›ç¨‹å¤„ç†è¿‡ç¨‹ä¸­ï¼Œä¼šå®æ—¶çš„å‘é€æ¶ˆæ¯å› Webviewã€‚</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// æ–‡ä»¶ä½ç½® webview-ui/src/services/grpc-client-base.ts</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addEventListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;message&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> handleResponse</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Send the request</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> encodedRequest </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">encodeRequest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">request</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vscode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">postMessage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;grpc_request&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  grpc_request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    service</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> service</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">fullName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    method</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> method</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// method ä¸º newTask</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    message</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> encodedRequest</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// message ä¸ºè¾“å…¥çš„æ–‡æœ¬ã€å›¾ç‰‡ã€æ–‡ä»¶æ¶ˆæ¯ç­‰</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    request_id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> requestId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    is_streaming</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>message çš„æ ¼å¼ï¼š</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">files =(0) []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">images =(0) []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">text =&#x27;/newtask åˆ›å»ºä¸€ä¸ªå¿«é€Ÿæ’åºç®—æ³•ï¼Œå†™å…¥ @/src/utils/index.ts æ–‡ä»¶&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>VSCode ä¸»è¿›ç¨‹æ¥æ”¶ <code>grpc_request</code> æ¶ˆæ¯è¿›è¡Œå¤„ç†ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="vscode-ä¸»è¿›ç¨‹æ¥æ”¶æ¶ˆæ¯">VSCode ä¸»è¿›ç¨‹æ¥æ”¶æ¶ˆæ¯<a href="#vscode-ä¸»è¿›ç¨‹æ¥æ”¶æ¶ˆæ¯" class="hash-link" aria-label="VSCode ä¸»è¿›ç¨‹æ¥æ”¶æ¶ˆæ¯çš„ç›´æ¥é“¾æ¥" title="VSCode ä¸»è¿›ç¨‹æ¥æ”¶æ¶ˆæ¯çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>ä¸»è¿›ç¨‹å¤„ç†çš„å†…å®¹ä½äºï¼š<code>src/core/controller/grpc-handler.ts</code>ï¼š</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token doc-comment comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">	 * Handle a gRPC request from the webview</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">	 * </span><span class="token doc-comment comment keyword" style="color:#00009f;font-style:italic">@param</span><span class="token doc-comment comment" style="color:#999988;font-style:italic"> </span><span class="token doc-comment comment parameter" style="color:#999988;font-style:italic">service</span><span class="token doc-comment comment" style="color:#999988;font-style:italic"> The service name</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">	 * </span><span class="token doc-comment comment keyword" style="color:#00009f;font-style:italic">@param</span><span class="token doc-comment comment" style="color:#999988;font-style:italic"> </span><span class="token doc-comment comment parameter" style="color:#999988;font-style:italic">method</span><span class="token doc-comment comment" style="color:#999988;font-style:italic"> The method name</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">	 * </span><span class="token doc-comment comment keyword" style="color:#00009f;font-style:italic">@param</span><span class="token doc-comment comment" style="color:#999988;font-style:italic"> </span><span class="token doc-comment comment parameter" style="color:#999988;font-style:italic">message</span><span class="token doc-comment comment" style="color:#999988;font-style:italic"> The request message</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">	 * </span><span class="token doc-comment comment keyword" style="color:#00009f;font-style:italic">@param</span><span class="token doc-comment comment" style="color:#999988;font-style:italic"> </span><span class="token doc-comment comment parameter" style="color:#999988;font-style:italic">requestId</span><span class="token doc-comment comment" style="color:#999988;font-style:italic"> The request ID for response correlation</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">	 * </span><span class="token doc-comment comment keyword" style="color:#00009f;font-style:italic">@param</span><span class="token doc-comment comment" style="color:#999988;font-style:italic"> </span><span class="token doc-comment comment parameter" style="color:#999988;font-style:italic">isStreaming</span><span class="token doc-comment comment" style="color:#999988;font-style:italic"> Whether this is a streaming request</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">	 * </span><span class="token doc-comment comment keyword" style="color:#00009f;font-style:italic">@returns</span><span class="token doc-comment comment" style="color:#999988;font-style:italic"> The response message or error for unary requests, void for streaming requests</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">	 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">handleRequest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		service</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		method</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		message</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">any</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		requestId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		isStreaming</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">boolean</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">Promise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		message</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">any</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		error</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		request_id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå‚æ•°å’Œ Webview ä¼ è¿‡æ¥çš„ä¸€è‡´ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä»»åŠ¡åˆå§‹åŒ–">ä»»åŠ¡åˆå§‹åŒ–<a href="#ä»»åŠ¡åˆå§‹åŒ–" class="hash-link" aria-label="ä»»åŠ¡åˆå§‹åŒ–çš„ç›´æ¥é“¾æ¥" title="ä»»åŠ¡åˆå§‹åŒ–çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>ç»è¿‡å„ç§å°è£…ï¼Œæœ€ç»ˆå¤„ç†çš„ä»»åŠ¡è½åˆ°äº† <code>src/core/controller/index.ts</code> çš„ <code>initTask</code> æ–¹æ³•å†…ä¸€ä¸ªè¶…çº§å¤§çš„ Task ç±»çš„åˆå§‹åŒ–ï¼š</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">task </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Task</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">mcpHub</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">workspaceTracker</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">historyItem</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">updateTaskHistory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">historyItem</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">postStateToWebview</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">message</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">postMessageToWebview</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">message</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">taskId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">reinitExistingTaskFromId</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">taskId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">cancelTask</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  apiConfiguration</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  autoApprovalSettings</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  browserSettings</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  chatSettings</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  shellIntegrationTimeout</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  terminalReuseEnabled </span><span class="token operator" style="color:#393A34">??</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  enableCheckpointsSetting </span><span class="token operator" style="color:#393A34">??</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  customInstructions</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  task</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  images</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  files</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  historyItem</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Task ç±»ä½äº <code>src/core/task/index.ts</code>ï¼Œ</p>
<p>åœ¨ä¸€ç³»åˆ—çš„åˆå§‹åŒ–åï¼š</p>
<blockquote>
<p>åˆå§‹åŒ–çš„ä»£ç æ²¡æœ‰è¿‡åº¦æ·±ç©¶ï¼Œä»ç±»åæ¥çœ‹ï¼ŒåŒ…æ‹¬äº†åç»­ä»»åŠ¡æ‰§è¡Œä¸­å¯èƒ½ä½¿ç”¨åˆ°çš„å·¥å…·ï¼šæµè§ˆå™¨ã€å‘½ä»¤è¡Œã€Urlã€DiffView ç­‰ï¼›mcp çš„é…ç½®ï¼›autoApproval çš„é…ç½®ç­‰ç­‰ã€‚</p>
</blockquote>
<p>ç»ˆäºè¿›å…¥åˆ°å®é™…çš„é€»è¾‘å¤„ç†ï¼š</p>
<p>é¦–å…ˆï¼Œæ ¹æ®ç”¨æˆ·é…ç½®çš„æ¨¡å‹æä¾›å•†ä¿¡æ¯åˆ›å»º AI çš„ api handlerï¼š</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Now that taskId is initialized, we can build the API handler</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">api </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">buildApiHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">effectiveApiConfiguration</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ç„¶åï¼Œè¿›å…¥åˆ° <code>startTask</code> æ–¹æ³•ï¼š</p>
<p>say æ–¹æ³•ä¼šåœ¨èŠå¤©é¢æ¿æ–°å¢ä¸€æ¡æ¶ˆæ¯ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼Œå°†ç”¨æˆ·çš„è¾“å…¥ä¿¡æ¯æ˜¾ç¤ºåœ¨èŠå¤©é¢æ¿ï¼š</p>
<p><img decoding="async" loading="lazy" src="https://fastly.jsdelivr.net/gh/bucketio/img4@main/2025/06/06/1749196272451-b424c65b-cb65-411f-9cbb-92322d586b92.png" alt="" class="img_ev3q"></p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">say</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;text&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> task</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> images</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> files</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ„å»º-user-prompt">æ„å»º User Prompt<a href="#æ„å»º-user-prompt" class="hash-link" aria-label="æ„å»º User Promptçš„ç›´æ¥é“¾æ¥" title="æ„å»º User Promptçš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>æ¥ä¸‹æ¥ï¼Œæ„å»º userContentï¼š</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ä¸ºç”¨æˆ·è¾“å…¥çš„æ¶ˆæ¯æ·»åŠ ä¸€ä¸ª task æ ‡ç­¾ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> userContent</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> UserContent </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;text&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    text</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">&lt;task&gt;\n</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">task</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">\n&lt;/task&gt;</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">...</span><span class="token plain">imageBlocks</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token doc-comment comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">è¾“å‡ºï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">text =</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">&#x27;&lt;task&gt;\n/newtask åˆ›å»ºä¸€ä¸ªå¿«é€Ÿæ’åºç®—æ³•ï¼Œå†™å…¥ @/src/utils/index.ts æ–‡ä»¶\n&lt;/task&gt;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">type =</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">&#x27;text&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">*/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>å¦‚æœç”¨æˆ·æä¾›äº†æ–‡ä»¶ï¼ˆCline æ”¯æŒç”¨æˆ·ä¸Šä¼ æ–‡æœ¬æ–‡ä»¶ï¼‰ï¼ŒèƒŒåå…¶å®æ˜¯è¯»å®Œæ–‡æœ¬æ–‡æœ¬ï¼Œä¹Ÿç”¨æ¥æ„é€  userContentã€‚</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">files </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> files</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">length </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> fileContentString </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">processFilesIntoText</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">files</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fileContentString</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    userContent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;text&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      text</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> fileContentString</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç»§ç»­æ„é€ -prompts">ç»§ç»­æ„é€  Prompts<a href="#ç»§ç»­æ„é€ -prompts" class="hash-link" aria-label="ç»§ç»­æ„é€  Promptsçš„ç›´æ¥é“¾æ¥" title="ç»§ç»­æ„é€  Promptsçš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>ç”¨è¿‡ Cline çš„è¯ï¼Œæˆ‘ä»¬ä¼šçŸ¥é“ Cline ä¼šå¾ªç¯å¤„ç†ä»»åŠ¡ï¼Œæ‰€ä»¥ User Prompts æ„é€ å®Œæˆåï¼Œè¿›å…¥åˆ° <code>initiateTaskLoop</code> æ–¹æ³•ï¼ŒçœŸæ­£æ‰§è¡Œä»»åŠ¡çš„æ–¹æ³•ä¸º <code>recursivelyMakeClineRequests</code>ï¼š</p>
<p>è¿›ä¸€æ­¥å¤„ç†ç”¨æˆ·çš„è¾“å…¥ä¿¡æ¯ï¼š</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">parsedUserContent</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> environmentDetails</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> clinerulesError</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">loadContext</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">userContent</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> includeFileDetails</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>è¿™æ ·å¤„ç†ä¹‹åï¼Œç”¨æˆ·è¾“å…¥é‡æ–°ç»„è£…ä¸º parsedUserContentï¼Œå†…å®¹æ¯”è¾ƒé•¿ï¼Œè¿™é‡Œä¸è´´äº†ï¼Œå¤§è‡´æ ¼å¼ä¸ºï¼š</p>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">explicit_instructions</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">new_task</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">explicit_instructions</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">task</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">ç”¨æˆ·è¾“å…¥</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">task</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">fileContent</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">src/utils/index.tså†…çš„æ–‡ä»¶</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">fileContent</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>å†æ¬¡çœ‹ä¸€ä¸‹æˆ‘ä»¬çš„è¾“å…¥ï¼š<code>/newtask å®ç°å¿«é€Ÿæ’åºç®—æ³•ï¼Œå†™å…¥ @/src/utils/index.ts æ–‡ä»¶</code>ï¼Œä¸Šé¢ä¸‰æ®µä¸€ä¸€å¯¹åº”ï¼š<code>\&lt;explicit_instructions type=&quot;new_task\&gt;&quot;</code> å¯¹åº” /newtask å‘½ä»¤ï¼Œè¿™æ˜¯ Cline çš„å†…ç½® promptï¼Œ@/src/utils/index.ts æ·»åŠ äº†è¯¥æ–‡ä»¶å†…å®¹ä½œä¸ºä¸Šä¸‹æ–‡ã€‚</p>
<p>åŒæ—¶å°† environmentDetails ä¹Ÿæ·»åŠ åˆ° userContentï¼ŒenvironmentDetails æœ‰å·¥ä½œç›®å½•ã€å½“å‰æ—¶é—´ã€å½“å‰æ‰“å¼€çš„ Tab ç­‰ã€‚</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">userContent </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> parsedUserContent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// add environment details as its own text block, separate from tool results</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">userContent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;text&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> text</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> environmentDetails </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>æ€ªä¸å¾— Cline è¿™ä¹ˆè€— Tokenï¼</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ¨¡å‹è¯·æ±‚">æ¨¡å‹è¯·æ±‚<a href="#æ¨¡å‹è¯·æ±‚" class="hash-link" aria-label="æ¨¡å‹è¯·æ±‚çš„ç›´æ¥é“¾æ¥" title="æ¨¡å‹è¯·æ±‚çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>ç»§ç»­è¿›å…¥ <code>attemptApiRequest</code> æ–¹æ³•ï¼Œé¦–å…ˆæ„é€  System promptï¼š</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> isClaude4ModelFamily </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">isClaude4ModelFamily</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> systemPrompt </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">SYSTEM_PROMPT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cwd</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> supportsBrowserUse</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">mcpHub</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">browserSettings</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> isClaude4ModelFamily</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>æ¯”è¾ƒæœ‰æ„æ€çš„æ˜¯ï¼ŒCline é’ˆå¯¹ Claude4 å®šåˆ¶äº†ä¸åŒçš„ System Promptã€‚</p>
<blockquote>
<p>System Prompt é‡Œä¼šå‘Šè¯‰æ¨¡å‹æˆ‘ä»¬å½“å‰å·²ç»æä¾›äº†å“ªäº›å·¥å…·ä»¥åŠè¿™äº›å·¥å…·è¯¥å¦‚ä½•è°ƒç”¨ï¼ˆå‚æ•°å’Œè§„åˆ™ï¼‰ï¼Œæ¯”å¦‚æœ¬æ¬¡ä»»åŠ¡è¦å°†æ¨¡å‹ç”Ÿæˆçš„ä»£ç å†™å…¥å·²æœ‰æ–‡ä»¶ï¼Œé‚£ä¹ˆå°±éœ€è¦ä½¿ç”¨åˆ° <code>replace_in_file</code> è¿™ä¸ªå·¥å…·ï¼Œè¿™é‡Œè´´ä¸€ä¸‹ System Prompt é‡Œå…³äº  <code>replace_in_file</code> çš„å†…å®¹ã€‚</p>
</blockquote>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token title important punctuation" style="color:#393A34">##</span><span class="token title important"> replace_in_file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Description: Request to replace sections of content in an existing file using SEARCH/REPLACE blocks that define exact changes to specific parts of the file. This tool should be used when you need to make targeted changes to specific parts of a file.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Parameters:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> path: (required) The path of the file to modify (relative to the current working directory ${cwd.toPosix()})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> diff: (required) One or more SEARCH/REPLACE blocks following this exact format:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  \`\`\`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ------- SEARCH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [exact content to find]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  =======</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [new content to replace with]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  +++++++ REPLACE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  \`\`\`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Critical rules:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">1.</span><span class="token plain"> SEARCH content must match the associated file section to find EXACTLY:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token list punctuation" style="color:#393A34">*</span><span class="token plain"> Match character-for-character including whitespace, indentation, line endings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token list punctuation" style="color:#393A34">*</span><span class="token plain"> Include all comments, docstrings, etc.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">2.</span><span class="token plain"> SEARCH/REPLACE blocks will ONLY replace the first match occurrence.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token list punctuation" style="color:#393A34">*</span><span class="token plain"> Including multiple unique SEARCH/REPLACE blocks if you need to make multiple changes.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token list punctuation" style="color:#393A34">*</span><span class="token plain"> Include </span><span class="token italic punctuation" style="color:#393A34">*</span><span class="token italic content">just</span><span class="token italic punctuation" style="color:#393A34">*</span><span class="token plain"> enough lines in each SEARCH section to uniquely match each set of lines that need to change.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token list punctuation" style="color:#393A34">*</span><span class="token plain"> When using multiple SEARCH/REPLACE blocks, list them in the order they appear in the file.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">3.</span><span class="token plain"> Keep SEARCH/REPLACE blocks concise:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token list punctuation" style="color:#393A34">*</span><span class="token plain"> Break large SEARCH/REPLACE blocks into a series of smaller blocks that each change a small portion of the file.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token list punctuation" style="color:#393A34">*</span><span class="token plain"> Include just the changing lines, and a few surrounding lines if needed for uniqueness.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token list punctuation" style="color:#393A34">*</span><span class="token plain"> Do not include long runs of unchanging lines in SEARCH/REPLACE blocks.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token list punctuation" style="color:#393A34">*</span><span class="token plain"> Each line must be complete. Never truncate lines mid-way through as this can cause matching failures.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token list punctuation" style="color:#393A34">4.</span><span class="token plain"> Special operations:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token list punctuation" style="color:#393A34">*</span><span class="token plain"> To move code: Use two SEARCH/REPLACE blocks (one to delete from original + one to insert at new location)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token list punctuation" style="color:#393A34">*</span><span class="token plain"> To delete code: Use empty REPLACE section</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Usage:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">replace_in_file</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">path</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">File path here</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">path</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">diff</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Search and replace blocks here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">diff</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">replace_in_file</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>åŒæ—¶ï¼ŒSystem Prompt ä¹Ÿç»§ç»­è¿½åŠ äº†ç”¨æˆ·çš„åå¥½è¯­è¨€ï¼Œæ–¹ä¾¿æŒ‰ç…§ç”¨æˆ·åå¥½çš„è¯­è¨€è¿›è¡Œè¾“å‡ºã€‚</p>
<p>æ¥ä¸‹æ¥å‘é€è¯·æ±‚ï¼š</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> stream </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">api</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">createMessage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">systemPrompt</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> contextManagementMetadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">truncatedConversationHistory</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>é’ˆå¯¹æ¨¡å‹çš„è¾“å‡ºï¼Œéœ€è¦è¿›ä¸€æ­¥å¤„ç†ï¼Œæ˜¯ç›´æ¥å±•ç¤ºåœ¨èŠå¤©é¢æ¿ï¼Œè¿˜æ˜¯éœ€è¦è°ƒç”¨å·¥å…·å¤„ç†ï¼Œè¿™éƒ¨åˆ†é€»è¾‘åœ¨ <code>src/core/assistant-message/parse-assistant-message.ts</code> çš„ <code>parseAssistantMessageV2</code> æ–¹æ³•å†…ã€‚</p>
<p>é’ˆå¯¹æˆ‘ä»¬æœ¬æ¬¡åˆ›å»ºæ’åºç®—æ³•çš„ä»»åŠ¡ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªæ¨¡å‹è¾“å‡ºæ ·ä¾‹ï¼š</p>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">thinking</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">\næˆ‘éœ€è¦åœ¨</span><span class="token code-snippet code keyword" style="color:#00009f">`src/utils/index.ts`</span><span class="token plain">æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªå¿«é€Ÿæ’åºç®—æ³•ã€‚é¦–å…ˆï¼Œæˆ‘å·²ç»çœ‹åˆ°äº†æ–‡ä»¶çš„å†…å®¹ï¼Œè¿™æ˜¯ä¸€ä¸ªå·¥å…·å‡½æ•°é›†åˆæ–‡ä»¶ï¼ŒåŒ…å«äº†å„ç§å®ç”¨å‡½æ•°ï¼Œå¦‚rpxè½¬æ¢ã€vwè®¡ç®—ã€ç±»å‹æ£€æŸ¥ã€æ—¥å¿—è®°å½•ç­‰ã€‚\n\næˆ‘éœ€è¦åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªå¿«é€Ÿæ’åºç®—æ³•å®ç°ã€‚å¿«é€Ÿæ’åºæ˜¯ä¸€ç§é«˜æ•ˆçš„æ’åºç®—æ³•ï¼ŒåŸºäºåˆ†æ²»æ³•çš„æ€æƒ³ã€‚æˆ‘å°†å®ç°ä¸€ä¸ªé€šç”¨çš„å¿«é€Ÿæ’åºå‡½æ•°ï¼Œå¯ä»¥å¯¹æ•°ç»„è¿›è¡Œæ’åºã€‚\n\næˆ‘å°†ä½¿ç”¨</span><span class="token code-snippet code keyword" style="color:#00009f">`replace_in_file`</span><span class="token plain">å·¥å…·æ¥ä¿®æ”¹æ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ å¿«é€Ÿæ’åºç®—æ³•çš„å®ç°ã€‚æˆ‘éœ€è¦ç¡®ä¿æ·»åŠ çš„ä»£ç ä¸ç°æœ‰ä»£ç é£æ ¼ä¿æŒä¸€è‡´ï¼Œå¹¶æä¾›é€‚å½“çš„ç±»å‹æ³¨è§£å’Œæ³¨é‡Šã€‚\n\næˆ‘å°†åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ å¿«é€Ÿæ’åºç®—æ³•çš„å®ç°ï¼ŒåŒ…æ‹¬ï¼š\n1. ä¸€ä¸ªä¸»å¿«é€Ÿæ’åºå‡½æ•°ï¼Œæ¥å—ä¸€ä¸ªæ•°ç»„å’Œå¯é€‰çš„æ¯”è¾ƒå‡½æ•°\n2. ä¸€ä¸ªè¾…åŠ©å‡½æ•°ç”¨äºåˆ†åŒºæ“ä½œ\n\nè®©æˆ‘ä½¿ç”¨</span><span class="token code-snippet code keyword" style="color:#00009f">`replace_in_file`</span><span class="token plain">å·¥å…·æ¥ä¿®æ”¹æ–‡ä»¶ã€‚\n</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">thinking</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">\n\n</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">replace_in_file</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">\n</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">path</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">src/utils/index.ts</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">path</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">\n</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">diff</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">\n------- SEARCH\nexport const jump2UpdateApp = () =&gt; {\n  if (isâ€¦ (a, b) =&gt; {\n  if (a &lt; b) return -1;\n  if (a &gt; b) return 1;\n  return 0;\n}): T[] =&gt; {\n  // åˆ›å»ºæ•°ç»„å‰¯æœ¬ï¼Œä¸ä¿®æ”¹åŸæ•°ç»„\n  const result = [...arr];\n  \n  // å†…éƒ¨å¿«é€Ÿæ’åºå®ç°\n  const _quickSort = (arr: T[], left: number, right: number) =&gt; {\n    if (left &lt; right) {\n      const pivotIndex = partition(arr, left, right);\n      _quickSort(arr, left, pivotIndex - 1);\n      _quickSort(arr, pivotIndex + 1, right);\n    }\n  };\n  \n  // åˆ†åŒºæ“ä½œ\n  const partition = (arr: T[], left: number, right: number): number =&gt; {\n    // é€‰æ‹©æœ€å³è¾¹çš„å…ƒç´ ä½œä¸ºåŸº</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>parseAssistantMessageV2</code> æ–¹æ³•ä¼šè§£æä¸Šè¿°è¾“å‡ºå†…å®¹ï¼Œä¸»è¦æ˜¯ä»æ¨¡å‹è¾“å‡ºä¸­è§£æå‡ºä½¿ç”¨å“ªäº›å·¥å…·ä»¥åŠå·¥å…·çš„å‚æ•°ï¼Œæ¯”å¦‚è¿™é‡Œæˆ‘ä»¬å‘ç°æ¨¡å‹è¾“å‡ºä¸­æœ‰ &lt;replace_in_file&gt;ï¼Œé‚£å°±è¯´æ˜è¿™æ¬¡éœ€è¦ä½¿ç”¨ replace_in_file å·¥å…·ã€‚</p>
<p>æ¥ä¸‹æ¥è°ƒç”¨ <code>presentAssistantMessage</code> æ–¹æ³•çœŸæ­£å°†æ¨¡å‹æ¶ˆæ¯å±•ç¤ºç»™ç”¨æˆ·ï¼Œä¸€æ–¹é¢å±•ç¤ºæ–‡æœ¬æ¶ˆæ¯ï¼Œç±»ä¼¼ä¸‹å›¾ï¼š</p>
<p><img decoding="async" loading="lazy" src="https://fastly.jsdelivr.net/gh/bucketio/img9@main/2025/06/06/1749217048970-dba8c0b7-c03c-4767-a014-845c105ab0d9.png" alt="" class="img_ev3q"></p>
<p>ä¸€æ–¹é¢æ‰§è¡Œä¸Šä¸€æ­¥è§£æå‡ºçš„ toolï¼Œå°†æ¨¡å‹ç”Ÿæˆä»£ç ä»¥ diff çš„æ–¹å¼å†™å…¥æ–‡ä»¶ï¼Œè¿™é‡Œå€ŸåŠ© VSCode çš„èƒ½åŠ›åˆ›å»º diffViewã€‚è‡ªæ­¤è¿™ä¸ªä»»åŠ¡ç®—æ˜¯å®Œæˆäº†ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ€»ç»“">æ€»ç»“<a href="#æ€»ç»“" class="hash-link" aria-label="æ€»ç»“çš„ç›´æ¥é“¾æ¥" title="æ€»ç»“çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>æŠ›å¼€ Cline ä¸­ç”¨æˆ·äº¤äº’å’Œå·¥ç¨‹å¤„ç†çš„éƒ¨åˆ†ï¼Œæˆ‘ä»¬å‘ç°æœ€æ ¸å¿ƒçš„å…¶å®åªæœ‰ä¸¤ä»¶äº‹æƒ…ï¼š</p>
<ol>
<li>
<p>prompt ç»„è£…ã€‚è¿™å…¶ä¸­åŒ…æ‹¬äº† System Promptã€VSCode å’Œç³»ç»Ÿçš„ç¯å¢ƒä¿¡æ¯ã€å†…ç½® Commandã€å†…ç½®çš„ @ å¼•ç”¨ï¼ˆæ–‡ä»¶ã€ç›®å½•ä¿¡æ¯ï¼‰ã€ç”¨æˆ·çš„è¾“å…¥ï¼ˆæ–‡æœ¬ã€å›¾ç‰‡ã€æ–‡æœ¬æ–‡ä»¶ï¼‰ï¼Œå½“ç„¶è¿˜æœ‰æˆ‘ä»¬ä¹‹å‰ä»‹ç»çš„ Rules ä»¥åŠæˆ‘ä»¬æåˆ°è¿‡çš„ Workflowï¼ˆæœ¬è´¨æ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„ Commandï¼‰ã€‚è¿™äº›å†…å®¹å…±åŒç»„è£…ç§°ä¸º Prompt å‘é€ç»™æ¨¡å‹ï¼ŒåŠ›æ±‚ç»™æ¨¡å‹è¶³å¤Ÿå¤šçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œè·å¾—æ›´åŠ å‡†ç¡®çš„ç»“æœã€‚</p>
</li>
<li>
<p>tools è°ƒç”¨ã€‚é¦–å…ˆåœ¨ System Prompt å®šä¹‰äº†æ¨¡å‹å¯ä»¥è°ƒç”¨çš„ Toolï¼ˆåŒ…æ‹¬å†…ç½®çš„å’Œ MCP Server å®šä¹‰çš„ï¼‰ï¼Œåœ¨æ¨¡å‹è¾“å‡ºæ—¶æŒ‡å®šè°ƒç”¨çš„ Tool å’Œéœ€è¦çš„å‚æ•°ï¼Œä»¥æ­¤æ–¤è¿›ä¸€æ­¥å¢å¼ºæ¨¡å‹çš„èƒ½åŠ›ã€‚</p>
</li>
</ol>
<p>ä¸¤è€…å…±åŒåˆä½œå®Œæˆç”¨æˆ·çš„ç¼–ç çš„ä»»åŠ¡ã€‚</p>
<p>ç”±æ­¤æˆ‘ä»¬å¯ä»¥çœ‹åˆ° Agent å¼€å‘ä¸­æœ€é‡è¦çš„ä¸‰ç‚¹ï¼š</p>
<ol>
<li>æ¨¡å‹çš„ä½¿ç”¨</li>
<li>ä¸°å¯Œçš„åˆ›æ„</li>
<li>ä¸æ»‘çš„ä½“éªŒ</li>
</ol>
<p>æœ€åï¼Œæœ¬æ–‡æ˜¯åœ¨æˆ‘è¾¹è°ƒè¯•è¾¹å†™ä½œçš„è¿‡ç¨‹ä¸­å®Œæˆçš„ï¼Œå¯èƒ½è¡¨è¾¾è¿˜ä¸å¤Ÿæ¸…æ™°ï¼Œæ¬¢è¿æœ‰å…´è¶£çš„åŒå­¦ä¸€èµ·äº¤æµæŒ‡æ­£ã€‚</p>
<hr>
<div align="center"><p>æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼šå‰ç«¯ç”Ÿå­˜æŒ‡å—ï¼Œä¸€èµ·èŠèŠå‰ç«¯ã€AI å’Œç”Ÿæ´»ã€‚</p><img src="https://cloud-minapp-47803.cloud.ifanrusercontent.com/1tvAM68Cvrx3bfLR.jpg" style="width:180px"></div></div><footer class="row docusaurus-mt-lg"><div class="col"><b>æ ‡ç­¾ï¼š</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/ai">AI</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/cline">Cline</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/2025-05-30-cline-rule.md">ç°åœ¨å¼€å§‹ä½¿ç”¨ Cline Rules</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2025-05-30T00:00:00.000Z">2025å¹´5æœˆ30æ—¥</time> Â· <!-- -->é˜…è¯» éœ€ 5 åˆ†é’Ÿ</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/sleepy-zone" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="https://avatars.githubusercontent.com/u/131369648?v=4" alt="SleepyZone"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://github.com/sleepy-zone" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp">SleepyZone</span></a></div><small class="authorTitle_nd0D" title="å‰ç«¯å¼€å‘ / å¼€æºçˆ±å¥½è€…">å‰ç«¯å¼€å‘ / å¼€æºçˆ±å¥½è€…</small><div class="authorSocials_rSDt"></div></div></div></div></div></header><div class="markdown"><p><img decoding="async" loading="lazy" src="https://fastly.jsdelivr.net/gh/bucketio/img19@main/2025/05/30/1748588412574-e064741c-0bf1-4c61-be3c-fd9ac86453e4.png" alt="" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="å†™åœ¨å‰é¢">å†™åœ¨å‰é¢<a href="#å†™åœ¨å‰é¢" class="hash-link" aria-label="å†™åœ¨å‰é¢çš„ç›´æ¥é“¾æ¥" title="å†™åœ¨å‰é¢çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>æœ€è¿‘åœ¨ä¸šåŠ¡ï¼ˆé¢å‘ç”¨æˆ·çš„ C ç«¯ä¸šåŠ¡ï¼‰ä¸­è¾ƒå¤šçš„ä½¿ç”¨äº† <a href="https://docs.cline.bot/getting-started/what-is-cline" target="_blank" rel="noopener noreferrer">Cline</a>ï¼Œæ€»ä½“æ„Ÿè§‰éå¸¸ä¸æ»‘ï¼ˆå°¤å…¶æ˜¯çœ‹ç€ä»–åœ¨é»˜é»˜åœ°ç”Ÿæˆä»£ç å¹¶ä¸”è‡ªå·±æ’æŸ¥é”™è¯¯çš„æ—¶å€™ï¼Œä½† Token ç¡®å®ä¹Ÿæ¶ˆè€—çš„å¾ˆå¿«ğŸ˜‚ï¼‰ã€‚</p>
<p>Cline ç®—æ˜¯ VS Code AI å¼€å‘æ’ä»¶ä¸­çš„ä½¼ä½¼è€…äº†ï¼Œå¹¶ä¸”æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œä»–çš„ä¸€ä¸ª fork åˆ†æ”¯ RooCode çƒ­åº¦ä¹Ÿå¾ˆé«˜ã€‚</p>
<p><img decoding="async" loading="lazy" src="https://fastly.jsdelivr.net/gh/bucketio/img17@main/2025/05/30/1748572666434-e20a0717-a388-47c9-8332-832423e6b337.png" alt="openrouter ç½‘ç«™çš„ç»Ÿè®¡ï¼ŒCline é¥é¥é¢†å…ˆ" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="å¼€å§‹é…ç½®-cline-rules">å¼€å§‹é…ç½® Cline Rules<a href="#å¼€å§‹é…ç½®-cline-rules" class="hash-link" aria-label="å¼€å§‹é…ç½® Cline Rulesçš„ç›´æ¥é“¾æ¥" title="å¼€å§‹é…ç½® Cline Rulesçš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>ä½œä¸ºä¸€ä¸ªé€šç”¨çš„ç¼–ç¨‹åŠ©æ‰‹ï¼Œå¦‚ä½•èƒ½é’ˆå¯¹ä¸åŒçš„é¡¹ç›®è¿›è¡Œæ›´å¥½çš„å¼€å‘ï¼Œé™¤äº† Cline æœ¬èº«å¯¹ä»£ç çš„ç†è§£ä¹‹å¤–ï¼Œä½œä¸ºç”¨æˆ·å¦‚æœèƒ½æä¾›æ›´å¤šçš„æŒ‡å¼•ï¼Œå¯ä»¥è®© Cline å‘æŒ¥æ›´å¥½çš„ä½œç”¨ã€‚</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼ŒClineã€Cursor åŠå…¶ä»–ä»£ç  Agent éƒ½ä¼šæä¾› rules è¿™ä¸ªæ¦‚å¿µï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»º rules ç›®å½•ï¼Œç›®å½•ä¸‹æ ¹æ®è‡ªå·±çš„é¡¹ç›®å¯ä»¥æ–°å»ºå„ç§è§„åˆ™æ–‡ä»¶ã€‚</p>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">your-project/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	â”œâ”€â”€ .clinerules</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		â”œâ”€â”€ project.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â”œâ”€â”€ api.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	â”œâ”€â”€ src/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	â”œâ”€â”€ docs/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	â””â”€â”€ ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>å¦‚æœä½ çš„è§„åˆ™å…¨å±€é€šç”¨ï¼Œå¯ä»¥å°†è§„åˆ™æ”¾ç½®åˆ° <code>Documents/Cline/Rules</code> ç›®å½•ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cline-rules-ä¼˜åŠ¿">Cline Rules ä¼˜åŠ¿<a href="#cline-rules-ä¼˜åŠ¿" class="hash-link" aria-label="Cline Rules ä¼˜åŠ¿çš„ç›´æ¥é“¾æ¥" title="Cline Rules ä¼˜åŠ¿çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>æ”¾åœ¨é¡¹ç›®å†…å¥½å¤„å¾ˆæ˜æ˜¾ï¼š</p>
<ol>
<li>å¯ä»¥é’ˆå¯¹æ¯ä¸ªé¡¹ç›®é…ç½®ä¸åŒçš„è§„åˆ™ï¼›</li>
<li>ä½œä¸ºé¡¹ç›®æºä»£ç çš„ä¸€éƒ¨åˆ†ï¼Œè¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼ŒæŒç»­ç»´æŠ¤ï¼Œè·Ÿéšé¡¹ç›®å‘å±•è®¾ç½®é•¿è¿œçš„ ruleï¼›</li>
<li>ä¿è¯å›¢é˜Ÿæˆå‘˜ä½¿ç”¨ AI çš„è¡Œä¸ºæ˜¯ä¸€è‡´çš„ã€‚</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cline-rules-çš„åŸåˆ™">Cline Rules çš„åŸåˆ™<a href="#cline-rules-çš„åŸåˆ™" class="hash-link" aria-label="Cline Rules çš„åŸåˆ™çš„ç›´æ¥é“¾æ¥" title="Cline Rules çš„åŸåˆ™çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<ol>
<li>æ¸…æ™°ç®€æ´ï¼šä½¿ç”¨ç®€å•è¯­è¨€ï¼Œé¿å…æ­§ä¹‰ã€‚</li>
<li>å…³æ³¨æœŸæœ›ç»“æœï¼šæè¿°ä½ æƒ³è¦çš„ç»“æœï¼Œè€Œä¸æ˜¯å…·ä½“æ­¥éª¤ã€‚</li>
<li>æµ‹è¯•å’Œè¿­ä»£ï¼šè¯•éªŒæ‰¾å‡ºæœ€é€‚åˆä½ çš„å·¥ä½œæµç¨‹çš„æ–¹æ³•ã€‚</li>
</ol>
<p>rules æœ¬è´¨ä¸Šæ˜¯è‡ªå®šä¹‰ promptsï¼Œå’Œ Cline çš„ system prompts äº’ä¸ºè¡¥å……ï¼Œå…±åŒä¸ºé¡¹ç›®æœåŠ¡ã€‚ï¼ˆsystem prompsï¼š<a href="https://github.com/cline/cline/blob/main/src/core/prompts/model_prompts/claude4.ts%EF%BC%89" target="_blank" rel="noopener noreferrer">https://github.com/cline/cline/blob/main/src/core/prompts/model_prompts/claude4.tsï¼‰</a></p>
<p>å…³äºæç¤ºè¯ï¼Œæˆ‘ä¹‹å‰æœ‰æ€»ç»“è¿‡<a href="https://mp.weixin.qq.com/s/YFV0MO_pX3Us-PEMzxF0vQ" target="_blank" rel="noopener noreferrer">è°·æ­Œçš„æç¤ºè¯æœ€ä½³å®è·µ</a>ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="é«˜çº§ç”¨æ³•-rules-bank">é«˜çº§ç”¨æ³• Rules Bank<a href="#é«˜çº§ç”¨æ³•-rules-bank" class="hash-link" aria-label="é«˜çº§ç”¨æ³• Rules Bankçš„ç›´æ¥é“¾æ¥" title="é«˜çº§ç”¨æ³• Rules Bankçš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>Rules Bank é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å­˜æ”¾ Rules çš„åœ°æ–¹ï¼Œå¦‚æœä½ çš„é¡¹ç›®å¾ˆå¤æ‚ï¼Œåˆæœ‰å‰ç«¯ã€åˆæœ‰åç«¯ã€åˆæœ‰ä¸åŒçš„æŠ€æœ¯æ ˆï¼Œè¿™ä¸ªæ—¶å€™å°±å¾ˆæœ‰ç”¨ã€‚</p>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">your-project/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ .clinerules/              # Active rules - automatically applied</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ 01-coding.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â””â”€â”€ client-a.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ clinerules-bank/          # Repository of available but inactive rules</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ clients/              # Client-specific rule sets</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚   â”œâ”€â”€ client-a.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚   â””â”€â”€ client-b.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ frameworks/           # Framework-specific rules</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚   â”œâ”€â”€ react.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚   â””â”€â”€ vue.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â””â”€â”€ project-types/        # Project type standards</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚       â”œâ”€â”€ api-service.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚       â””â”€â”€ frontend-app.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€ ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>æ¯”å¦‚å½“ä½ åœ¨å¼€å‘ React æŠ€æœ¯æ ˆçš„æ—¶å€™ï¼Œä» Rules Bank ä¸­å¤åˆ¶ React Rule åˆ° Cline Rules å†…ã€‚</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Switch to React</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm .clinerules/vue.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cp clinerules-bank/clients/react.md .clinerules/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>æ€»ä¹‹ä¸€åˆ‡æ–‡æœ¬æ”¾åˆ°ä»£ç ä»“åº“ä¸­ï¼Œæé«˜å¯æŒç»­æ€§ï¼Œå¹¶ä¸”å¯ä»¥è·Ÿéšé¡¹ç›®ä¿æŒæœ€æ–°çš„è¿­ä»£ï¼</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="å¦‚ä½•ç®¡ç†">å¦‚ä½•ç®¡ç†<a href="#å¦‚ä½•ç®¡ç†" class="hash-link" aria-label="å¦‚ä½•ç®¡ç†çš„ç›´æ¥é“¾æ¥" title="å¦‚ä½•ç®¡ç†çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>Cline æä¾›äº†ä¸€ç§æ–¹ä¾¿çš„æ–¹å¼ç®¡ç† Rulesï¼Œåœ¨è¾“å…¥æ¡†ä¸‹æ–¹ä¸€ä¸ªå¤©å¹³çš„å°æ ‡å¿—å†…ï¼Œå¯ä»¥æ‰“å¼€ Rule ç®¡ç†å™¨ï¼Œæ–°å¢åˆ é™¤æˆ–è€…å¯ç”¨ç¦ç”¨ Ruleã€‚</p>
<p><img decoding="async" loading="lazy" src="https://fastly.jsdelivr.net/gh/bucketio/img19@main/2025/05/30/1748590113024-f84df6e2-374d-4378-b4af-79b8b7ed9f86.png" alt="" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="æœ€å">æœ€å<a href="#æœ€å" class="hash-link" aria-label="æœ€åçš„ç›´æ¥é“¾æ¥" title="æœ€åçš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>ååˆ†å»ºè®®ä½ åœ¨å¹³æ—¶å·¥ä½œä¸­ä½¿ç”¨ Clineï¼Œå¹¶ä½¿ç”¨ Cline Rule å¢å¼ºå¼€å‘ä½“éªŒã€‚åé¢ä¼šæŒç»­æ›´æ–° Cline çš„ç›¸å…³å†…å®¹ã€‚</p>
<p>æœ€åï¼Œå‡æœŸå¿«ä¹ï¼</p>
<hr>
<div align="center"><p>æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼šå‰ç«¯ç”Ÿå­˜æŒ‡å—ï¼Œä¸€èµ·èŠèŠå‰ç«¯ã€AI å’Œç”Ÿæ´»ã€‚</p><img src="https://cloud-minapp-47803.cloud.ifanrusercontent.com/1tvAM68Cvrx3bfLR.jpg" style="width:180px"></div></div><footer class="row docusaurus-mt-lg"><div class="col"><b>æ ‡ç­¾ï¼š</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/ai">AI</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/cline">Cline</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="åšæ–‡åˆ—è¡¨åˆ†é¡µå¯¼èˆª"></nav></main></div></div></div></div>
</body>
</html>