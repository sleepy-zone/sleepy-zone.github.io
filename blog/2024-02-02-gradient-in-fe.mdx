---
slug: gradient-in-fe
title: èŠèŠå‰ç«¯é‡Œçš„æ¸å˜
authors: [sleepy]
tags: [webdev]
---

[fabritor](https://github.com/sleepy-zone/fabritor-web) åœ¨æœ€æ–°ç‰ˆæœ¬æ”¯æŒäº†æ¸å˜è‰²å¡«å……ï¼Œå¯ä»¥è®©æ–‡å­—æˆ–èƒŒæ™¯å®ç°æ›´åä¸½çš„æ•ˆæœã€‚åœ¨å®è·µè¿‡ç¨‹ä¸­å‘ç°æ¸å˜å…¶å®æ˜¯ä¸€ä»¶æŒºæœ‰æ„æ€ï¼ˆå¾ˆç‚«é…·ï¼‰çš„äº‹æƒ…ï¼Œæ¥ä¸‹æ¥å°±å±•å¼€èŠèŠå‰ç«¯é‡Œå…³äºæ¸å˜çš„é‚£äº›äº‹ã€‚

## CSS æ¸å˜

ä½œä¸ºå‰ç«¯ï¼Œè¯´åˆ°æ¸å˜ï¼Œæœ€å…ˆæƒ³åˆ°çš„å°±æ˜¯ CSS æ¸å˜äº†ã€‚ä¸è¿‡å°è±¡ä¸­å¾ˆå°‘æ‰‹å†™ï¼Œä¸€èˆ¬åˆ‡é¡µé¢çš„æ—¶å€™ä¹Ÿå¾ˆå°‘æœ‰è¿™ç§æ•ˆæœï¼Œæœ‰ä¹Ÿæ˜¯ç›´æ¥å¤åˆ¶ Sketch å¯¼å‡ºçš„ CSS ğŸ¤ªã€‚

CSS é‡Œçš„æ¸å˜æœ‰ä¸‰ç±»ï¼šçº¿æ€§æ¸å˜ã€å¾„å‘æ¸å˜å’Œé”¥å½¢æ¸å˜ã€‚ç›´æ¥ç»™ä¸¢ä¸€æ®µè¯­æ³•å’Œ DEMO å¯èƒ½æœ‰ç‚¹æ‘¸ä¸ç€å¤´è„‘ã€‚æˆ‘ä»¬å¯ä»¥å…ˆçœ‹ä¸€ä¸‹ç»´åŸºç™¾ç§‘ç»™å‡ºçš„æ¸å˜å®šä¹‰ï¼š

> é¢œè‰²æ¸å˜ï¼ˆæœ‰æ—¶ä¹Ÿå«é¢œè‰²å¸¦ï¼‰æ˜¯æŒ‡ä¸€å®šèŒƒå›´çš„éšä¹‹ä½ç½®è€Œå˜çš„é¢œè‰²ï¼Œé€šå¸¸ç”¨äºå¡«å……æŸä¸€ä¸ªåŒºåŸŸã€‚æ¸å˜äº§ç”Ÿçš„é¢œè‰²éšä½ç½®è¿ç»­å˜åŒ–ï¼Œäº§ç”Ÿå¹³æ»‘çš„é¢œè‰²è¿‡æ¸¡ã€‚

ä»æ¦‚å¿µä¸Šçœ‹ï¼Œæ¸å˜ä¸»è¦ç”±ä»¥ä¸‹å†…å®¹ç»„æˆï¼š
1. éšä½ç½®å˜åŒ–çš„é¢œè‰²ï¼Œä¹Ÿå«åšè‰²æ ‡(color stop)ã€‚è‰²æ ‡ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œä¸€ä¸ªæ˜¯é¢œè‰²ï¼Œä¸€ä¸ªæ˜¯é¢œè‰²æ‰€åœ¨ä½ç½®ã€‚å¦‚ï¼š`blue 20%` æˆ–è€… `blue 20px`ã€‚
2. éœ€è¦æ¸å˜è‰²å¡«å……çš„åŒºåŸŸï¼Œç¡®å®šæ¸å˜çš„èµ·ç‚¹å’Œç»ˆç‚¹ï¼Œä¹Ÿå°±æ˜¯è‰²æ ‡å‰è¿›çš„æ–¹å‘ã€‚

ä¸è®ºæ˜¯å“ªç§æ¸å˜ï¼Œéƒ½æ˜¯é…ç½®ä»¥ä¸Šä¸¤éƒ¨åˆ†ï¼Œé€šå¸¸è¯­æ³•å°±æ˜¯ `xx-gradient(direction, color stop, color stop ...)`ã€‚è€Œå„ç±»æ¸å˜è‰²æ ‡éƒ¨åˆ†å…¶å®æ˜¯ä¸€è‡´çš„ï¼Œé‚£å°±åªè¦åŒºåˆ†ç¡®å®šæ¸å˜æ–¹å‘çš„å‚æ•°å°±è¡Œäº†ã€‚

### çº¿æ€§æ¸å˜

æ¯”å¦‚çº¿æ€§æ¸å˜ï¼Œé¡¾åæ€ä¹‰ï¼Œè‰²æ ‡æ²¿ç€ä¸€æ¡ç›´çº¿å‰è¿›ã€‚æ¸å˜æ–¹å‘æ˜¯ä¸€æ¡ç›´çº¿ï¼Œå°±ç›´æ¥ç”¨è§’åº¦ç¡®å®šæ¸å˜æ–¹å‘ã€‚

```css
.linear {
  background: linear-gradient(90deg, blue 0, pink 20%, green 100%);
}
```

ä¸Šé¢ä»£ç å®šä¹‰äº†çº¿æ€§æ¸å˜ï¼Œè‰²æ ‡ä»¥ 90deg æ–¹å‘ï¼ˆä»å·¦åˆ°å³ï¼‰å‰è¿›ï¼Œä¾æ¬¡ä»è“è‰²ã€ç²‰è‰²ã€ç»¿è‰²æ¸å˜ï¼Œå¹¶ä¸”å®šä¹‰äº†æ¯ä¸ªé¢œè‰²çš„ä½ç½®ã€‚

æ•ˆæœå¦‚å›¾ï¼š

![](https://files.mdnice.com/user/52679/38aa7805-a5e0-4047-b30b-dcf98285b672.png)

> åœ¨ä½¿ç”¨è§’åº¦çš„æ—¶å€™ï¼Œ0deg ä»£è¡¨æ¸å˜æ–¹å‘ä¸ºä»ä¸‹åˆ°ä¸Šï¼Œ90deg ä»£è¡¨æ¸å˜æ–¹å‘ä¸ºä»å·¦åˆ°å³ï¼Œè¯¸å¦‚æ­¤ç±»æ­£è§’åº¦éƒ½å±äºé¡ºæ—¶é’ˆæ–¹å‘ã€‚è€Œè´Ÿè§’åº¦æ„å‘³ç€é€†æ—¶é’ˆæ–¹å‘ã€‚

![](https://files.mdnice.com/user/52679/8cb861e9-527e-441b-8f96-ed84426c04da.png)

å‰å¾€ [MDN](https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Images/Using_CSS_gradients#%E4%BD%BF%E7%94%A8%E7%BA%BF%E6%80%A7%E6%B8%90%E5%8F%98) äº†è§£æ›´å¤šå…³äºçº¿æ€§æ¸å˜çš„çŸ¥è¯†ã€‚

### å¾„å‘æ¸å˜

å¾„å‘æ¸å˜ï¼Œè‰²æ ‡ä»¥åœ†æˆ–è€…æ¤­åœ†å‰è¿›ã€‚è¦ç¡®å®šæ¸å˜æ–¹å‘ï¼Œåªéœ€è¦ç¡®å®šåœ†æˆ–è€…æ¤­åœ†çš„çš„ä¸­å¿ƒå³å¯ã€‚

```css
.radial {
  background: radial-gradient(circle at 50% 50%, blue 0, pink 40%, green 100%);
}
```

ä¸Šé¢ä»£ç å®šä¹‰äº†å¾„å‘æ¸å˜ï¼Œåœ†å¿ƒåœ¨å…ƒç´ çš„ä¸­å¿ƒã€‚

![](https://files.mdnice.com/user/52679/89a25263-1377-4b59-aad8-bf79db5e6e58.png)

å‰å¾€ [MDN](https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Images/Using_CSS_gradients#%E4%BD%BF%E7%94%A8%E5%BE%84%E5%90%91%E6%B8%90%E5%8F%98) äº†è§£æ›´å¤šå…³äºå¾„å‘æ¸å˜çš„çŸ¥è¯†ã€‚

### é”¥å½¢æ¸å˜

é”¥å½¢æ¸å˜ï¼Œè‰²æ ‡å›´ç»•ç€ä¸­å¿ƒç‚¹æ—‹è½¬ï¼Œæ¯ä¸ªè‰²æ ‡çš„åŒºåŸŸç±»ä¼¼ä¸€ä¸ªæ‰‡å½¢ã€‚å’Œå¾„å‘æ¸å˜ä¸€æ ·ï¼Œéœ€è¦ç¡®å®šä¸€ä¸ªä¸­å¿ƒç‚¹ã€‚å¦å¤–ï¼Œå› ä¸ºæ˜¯å›´ç»•ç€ä¸­å¿ƒç‚¹æ—‹è½¬ï¼Œè¿˜éœ€è¦ç¡®å®šä¸€ä¸ªå…¶å®æ—‹è½¬è§’åº¦ã€‚

```css
.conic {
  background: conic-gradient(
    from 45deg at 50% 30%,
    blue 0,
    pink 40%,
    green 100%
  );
}
```

ä¸Šé¢ä»£ç å®šä¹‰äº†é”¥å½¢æ¸å˜ï¼Œä¸­å¿ƒåœ¨å…ƒç´ çš„ 50% 30% å¤„ï¼Œä» 45deg å¼€å§‹æ—‹è½¬ã€‚

![](https://files.mdnice.com/user/52679/f2cbf880-b40a-4fff-ac35-70ab427ee33e.png)

å‰å¾€ [MDN](https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Images/Using_CSS_gradients#%E4%BD%BF%E7%94%A8%E9%94%A5%E5%BD%A2%E6%B8%90%E5%8F%98) äº†è§£æ›´å¤šå…³äºé”¥é”¥å½¢æ¸å˜çš„çŸ¥è¯†ã€‚

### æ›´å¤š

CSS æ¸å˜é™¤äº†å•ä¸€çš„è®¾ç½®æ¸å˜ï¼Œè¿˜æ”¯æŒæ›´é«˜çº§çš„æ¸å˜è®¾ç½®ï¼Œæ¯”å¦‚å¯ä»¥å°†å¤šä¸ªæ¸å˜å †å èµ·æ¥ï¼š

```css
.stacked-linear {
  background: linear-gradient(
      217deg,
      rgba(255, 0, 0, 0.8),
      rgba(255, 0, 0, 0) 70.71%
    ), linear-gradient(127deg, rgba(0, 255, 0, 0.8), rgba(0, 255, 0, 0) 70.71%),
    linear-gradient(336deg, rgba(0, 0, 255, 0.8), rgba(0, 0, 255, 0) 70.71%);
}
```


![](https://files.mdnice.com/user/52679/447cf9c4-6fbf-4cba-bd6c-7fdbc9f029b1.png)

æ›´å¤šæ•ˆæœå¯ä»¥å‰å¾€ [MDN](https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Images/Using_CSS_gradients#%E4%BD%BF%E7%94%A8%E9%87%8D%E5%A4%8D%E6%B8%90%E5%8F%98) æŸ¥çœ‹ã€‚

CSS æ¸å˜çš„èƒ½åŠ›ååˆ†å¼ºå¤§ï¼Œå…³é”®çœ‹æœ‰æ²¡æœ‰åˆ›æ„äº†ã€‚ğŸ¤”

## Canvas æ¸å˜

canvas ä¹Ÿæ˜¯æ”¯æŒæ¸å˜è‰²çš„ï¼Œæ”¯æŒçº¿æ€§æ¸å˜å’Œå¾„å‘æ¸å˜ã€‚

### Canvas 

çº¿æ€§æ¸å˜ `createLinearGradient(x1, y1, x2, y2)`ï¼Œå’Œ CSS çº¿æ€§æ¸å˜ä½¿ç”¨è§’åº¦ç¡®å®šæ–¹å‘ä¸åŒï¼Œå››ä¸ªå‚æ•°åˆ†åˆ«è¡¨ç¤ºæ¸å˜çš„èµ·ç‚¹ (x1,y1) ä¸ç»ˆç‚¹ (x2,y2)ã€‚

```js
const lineargradient = ctx.createLinearGradient(0, 0, 150, 150);
```

å¾„å‘æ¸å˜ `createRadialGradient(x1, y1, r1, x2, y2, r2)`ï¼Œå…­ä¸ªå‚æ•°åˆ†åˆ«ç¡®å®šæ¸å˜çš„å†…åœ†åæ ‡ï¼ˆx1,y1ï¼‰ï¼Œå†…åœ†åŠå¾„ï¼ˆr1ï¼‰ä»¥åŠå¤–åœ†åæ ‡ï¼ˆx2,y2ï¼‰ï¼Œå¤–åœ†åŠå¾„ï¼ˆr2ï¼‰ã€‚

```js
const radialgradient = ctx.createRadialGradient(75, 75, 0, 75, 75, 100);
```

ç¡®å®šæ¸å˜åŒºåŸŸå’Œæ–¹å‘åï¼Œå°±å¯ä»¥ç»™æ¸å˜æ·»åŠ è‰²æ ‡äº†ï¼š

```js
lineargradient.addColorStop(0, "white");
lineargradient.addColorStop(1, "black");
```

### fabric.js 

[fabritor](https://github.com/sleepy-zone/fabritor-web) å†…çš„æ¸å˜åŸºäº [fabric.js](http://fabricjs.com/docs/fabric.Gradient.html) å®ç°ã€‚

fabric.js çš„æ¸å˜ä¹Ÿå°±æ˜¯å°è£…äº† Canvas æ¸å˜ APIï¼Œæºç ä½ç½®[https://github.com/fabricjs/fabric.js/blob/5.x/src/gradient.class.js](https://github.com/fabricjs/fabric.js/blob/5.x/src/gradient.class.js)ï¼š

```js
// ä»£ç ç‰‡æ®µ
var gradient;

if (this.type === 'linear') {
  gradient = ctx.createLinearGradient(
    coords.x1, coords.y1, coords.x2, coords.y2);
}
else if (this.type === 'radial') {
  gradient = ctx.createRadialGradient(
    coords.x1, coords.y1, coords.r1, coords.x2, coords.y2, coords.r2);
}

for (i = 0, len = this.colorStops.length; i < len; i++) {
  var color = this.colorStops[i].color,
      opacity = this.colorStops[i].opacity,
      offset = this.colorStops[i].offset;
  }
  gradient.addColorStop(offset, color);
}

return gradient;
```

canvas çš„æ¸å˜è‰²åŒæ—¶æ”¯æŒèµ‹å€¼ç»™ stroke å’Œ fill å±æ€§ï¼š

![](https://files.mdnice.com/user/52679/3903b98d-f5af-459f-90d3-7d41eb892639.png)

## CSS æ–‡å­—æ¸å˜

ä¸çŸ¥é“ä½ å‘ç°äº†æ²¡æœ‰ï¼Œcanvas å†…æ˜¯ç”¨ `fill` å±æ€§è¡¨ç¤ºå¡«å……ï¼Œæ‰€ä»¥ä¸è®ºæ˜¯å½¢çŠ¶è¿˜æ˜¯æ–‡å­—ï¼Œéƒ½å¯ä»¥åº”ç”¨æ¸å˜è‰²ã€‚è€Œ CSS æ¸å˜ä¸€èˆ¬æˆ‘ä»¬ç”¨åœ¨ `background` æˆ–è€… `background-image` å±æ€§å†…ï¼Œä¹Ÿå°±æ˜¯ä¸€èˆ¬ç”¨åˆ°èƒŒæ™¯å†…ï¼Œæ–‡å­—é¢œè‰²æ˜¯ç”¨ color å±æ€§è®¾ç½®çš„ï¼Œæˆ‘å°è¯•ç»™ color å±æ€§è®¾ç½®æ¸å˜ï¼Œå¹¶ä¸ä¼šç”Ÿæ•ˆã€‚

é‚£ CSS è¦ç»™æ–‡å­—è®¾ç½®æ¸å˜è‰²ï¼Œè¦æ€ä¹ˆåšå‘¢ï¼Ÿ

è¿™é‡Œçœ‹åˆ°ä¸€ç¯‡æ–‡ç« ï¼Œ[How to add a gradient overlay to text with CSS](https://fossheim.io/writing/posts/css-text-gradient/)ï¼Œé‡Œé¢ç»™äº†ä¸€ç§è®¾ç½®æ–‡å­—æ¸å˜è‰²çš„æ–¹æ³•ã€‚

```css
background-size: 100%;
background-repeat: repeat;
background-clip: text;
color: transparent;
background-image: linear-gradient(45deg, #f3ec78, #af4261);
```

å…³é”®å±æ€§å°±æ˜¯ `background-clip`ï¼Œè®¾ç½®ä¸º `text`ï¼Œå°†èƒŒæ™¯è£å‰ªæˆæ–‡å­—çš„å‰æ™¯è‰²ï¼Œè¿™é‡Œæˆ‘ä»¬åˆå°†æ–‡å­—è®¾ç½®ä¸ºé€æ˜ï¼Œæ–‡å­—å°±å±•ç¤ºä¸ºæ¸å˜è‰²äº†ã€‚

![](https://files.mdnice.com/user/52679/3d6061df-a589-449e-86ab-a1bff6645766.png)

ä½œè€…åé¢è¿˜ç»™å‡ºå‡ ä¸ªæ›´åŠ ç‚«é…·çš„æ¡ˆä¾‹ï¼Œå¯ä»¥å‰å¾€åŸæ–‡æŸ¥çœ‹ã€‚

<iframe height="300" style={{ width: '100%' }} scrolling="no" title="Gradient Text Overlay" src="https://codepen.io/fossheim/embed/wvBYEgY?default-tab=css%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href="https://codepen.io/fossheim/pen/wvBYEgY">
  Gradient Text Overlay</a> by Sarah Fossheim (<a href="https://codepen.io/fossheim">@fossheim</a>)
  on <a href="https://codepen.io">CodePen</a>.
</iframe>

## SVG æ¸å˜

SVG ç°åœ¨ç”¨çš„è¶Šæ¥è¶Šå¤šäº†ï¼Œå¤§å¤šæ•°å›¾æ ‡åº“éƒ½ç›´æ¥æä¾› SVG å›¾æ ‡äº†ã€‚é‚£å¦‚ä½•åœ¨ SVG å®ç°æ¸å˜å‘¢ï¼Œé¦–å…ˆæƒ³åˆ°çš„å°±æ˜¯ SVG æ˜¯æœ‰ fill å±æ€§çš„ï¼Œä½†å¾ˆé—æ†¾ï¼Œç›´æ¥ç»™fill å±æ€§è®¾ç½® CSS æ¸å˜ä¹Ÿæ˜¯ä¸ç”Ÿæ•ˆçš„ï¼ŒSVG æœ‰è‡ªå·±çš„æ¸å˜è¯­æ³•ã€‚

SVG è®¾ç½®æ¸å˜é¦–å…ˆéœ€è¦ä¸€æ®µæ¸å˜ SVGğŸ˜‚ï¼š

```html
<svg style="width:0;height:0;position:absolute;" aria-hidden="true" focusable="false">
  <linearGradient id="my-cool-gradient" x1="0" y1="0" x2="1" y2="1">
    <stop offset="0%" stop-color="#447799" />
    <stop offset="50%" stop-color="#224488" />
    <stop offset="100%" stop-color="#112266" />
  </linearGradient>
</svg>
```

ä½ ä¼šå‘ç°ï¼Œé™¤äº†è¯­æ³•ä¸ä¸€æ ·ï¼Œå’Œ canvas é‡Œç®€ç›´æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚

è¿™æ—¶å€™å°† linearGradient æ ‡ç­¾å¯¹åº”çš„ id èµ‹å€¼ç»™ svg fill å±æ€§å³å¯ã€‚

å¯ä»¥ css è®¾ç½®ï¼š
```css
.icon-sprite-gradient {
  fill: url(sprite.svg#my-cool-gradient) red;
}
```

ä¹Ÿå¯ä»¥ç›´æ¥å†…è” fill å±æ€§è®¾ç½®ï¼š

```html
<svg class="icon" fill="url(#my-cool-gradient) #447799;" aria-hidden="true" focusable="false">
  <use xlink:href="#symbol-id"></use>
</svg>
```

å¾„å‘æ¸å˜è¯­æ³•ä¹Ÿå’Œ canvas ä¸€è‡´ï¼Œè¿™é‡Œä¸å†å±•å¼€ï¼Œä¾ç„¶å¯ä»¥å» [MDN](https://developer.mozilla.org/zh-CN/docs/Web/SVG/Tutorial/Gradients) æŸ¥çœ‹ã€‚

å¦‚æœä½ ä½“éªŒè¿‡ fabritorï¼Œä½ ä¼šå‘ç°ï¼Œæ–‡å­—è®¾ç½®æ¸å˜è‰²ä¹‹åï¼Œå·¥å…·æ çš„å›¾æ ‡ä¹Ÿè·Ÿéšå±•ç¤ºä¸ºæ¸å˜è‰²ï¼Œå°±æ˜¯æ˜¯ç”¨äº†ä¸Šè¿°æ–¹å¼å®ç°çš„ã€‚

![](https://files.mdnice.com/user/52679/ee832995-858b-4e23-82d1-1b4804c62e1b.png)

å¦å¤– fabric.js é‡Œï¼Œæ¸å˜ç±»æœ‰ä¸ª [`toSVG`](https://github.com/fabricjs/fabric.js/blob/5.x/src/gradient.class.js#L220) çš„æ–¹æ³•ï¼Œå°† canvas æ¸å˜è½¬æ¢ä¸º svg æ¸å˜ã€‚

## æ¸å˜è‰²é€‰æ‹©å™¨ï¼šreact colors beauty

æœ€åï¼Œæ¨èä¸€ä¸‹æˆ‘å¼€å‘çš„æ¸å˜è‰²é€‰æ‹©å™¨ [https://github.com/sleepy-zone/react-colors](https://github.com/sleepy-zone/react-colors)ï¼ŒåŒæ—¶æ”¯æŒçº¯è‰²å’Œæ¸å˜è‰²é€‰æ‹©ï¼ˆæ”¯æŒè‰²æ ‡ã€çº¿æ€§æ¸å˜è§’åº¦é…ç½®ï¼‰ï¼Œå·²ç»åœ¨ fabritor ä¸Šä½¿ç”¨äº†ï¼

![](https://files.mdnice.com/user/52679/bfe7fb3e-817c-49bc-9ef4-5825bb93beb5.png)

å¦‚æœä½ çš„é¡¹ç›®ä¹Ÿéœ€è¦ä¸€ä¸ªæ¸å˜è‰²é€‰æ‹©å™¨ï¼Œä¸å¦¨è¯•ä¸€ä¸‹ï¼

